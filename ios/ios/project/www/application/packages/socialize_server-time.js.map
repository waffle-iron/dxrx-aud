{"version":3,"sources":["meteor://ðŸ’»app/packages/socialize_server-time/packages/socialize_server-time.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG","file":"/packages/socialize_server-time.js","sourcesContent":["(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                         //\n// packages/socialize:server-time/common/server-time.js                                    //\n//                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                           //\nServerTime = {                                                                             // 1\n    _timeDifference: 0                                                                     // 2\n};                                                                                         // 3\n                                                                                           // 4\nServerTime.now = function () {                                                             // 5\n    return Date.now() + this._timeDifference;                                              // 6\n};                                                                                         // 7\n                                                                                           // 8\nServerTime.date = function() {                                                             // 9\n    return new Date(this.now());                                                           // 10\n};                                                                                         // 11\n/////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                         //\n// packages/socialize:server-time/client/server-time.js                                    //\n//                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                           //\nServerTime.init = function() {                                                             // 1\n    ServerTime._diffStart = Date.now();                                                    // 2\n                                                                                           // 3\n    Meteor.call(\"socialize:getServerTime\", function(error,serverTimeStamp){                // 4\n        if(!error){                                                                        // 5\n            var now = Date.now();                                                          // 6\n            var latency = now - ServerTime._diffStart;                                     // 7\n                                                                                           // 8\n            ServerTime._timeDifference = serverTimeStamp + latency - now;                  // 9\n        }else{                                                                             // 10\n            throw(error);                                                                  // 11\n        }                                                                                  // 12\n    });                                                                                    // 13\n};                                                                                         // 14\n                                                                                           // 15\n//At startup, wait a couple seconds so that we can get a more accurate latency estimation. // 16\n//This is far from optimal but should work.                                                // 17\nMeteor.startup(function(){                                                                 // 18\n    Meteor.setTimeout(function(){                                                          // 19\n        ServerTime.init();                                                                 // 20\n    }, 2000);                                                                              // 21\n});                                                                                        // 22\n                                                                                           // 23\n/////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}