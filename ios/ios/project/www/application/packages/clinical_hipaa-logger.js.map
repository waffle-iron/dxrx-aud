{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical_hipaa-logger/packages/clinical_hipaa-logger.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2E","file":"/packages/clinical_hipaa-logger.js","sourcesContent":["(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/clinical:hipaa-logger/lib/HipaaLog.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n                                                                                                                       // 1\nHipaaLog = new Mongo.Collection(\"HipaaLog\");                                                                           // 2\n                                                                                                                       // 3\nHipaaLog.allow({                                                                                                       // 4\n  insert: function (userId, doc) {                                                                                     // 5\n    // we can only write to the audit log if we're logged in                                                           // 6\n    if (userId) {                                                                                                      // 7\n      return true;                                                                                                     // 8\n    } else {                                                                                                           // 9\n      return false;                                                                                                    // 10\n    }                                                                                                                  // 11\n  },                                                                                                                   // 12\n  update: function (userId, doc, fields, modifier) {                                                                   // 13\n    // the audit log is write-only                                                                                     // 14\n    return false;                                                                                                      // 15\n  },                                                                                                                   // 16\n  remove: function (userId, doc) {                                                                                     // 17\n    // the audit log is write-only                                                                                     // 18\n    return false;                                                                                                      // 19\n  }                                                                                                                    // 20\n  // fetch: function(userId){                                                                                          // 21\n  //   return true;                                                                                                    // 22\n  // }                                                                                                                 // 23\n});                                                                                                                    // 24\n                                                                                                                       // 25\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/clinical:hipaa-logger/lib/HipaaLogger.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/*                                                                                                                     // 1\nvar hipaaEvent = {                                                                                                     // 2\n  eventType: \"\",                                                                                                       // 3\n  userId: \"\",                                                                                                          // 4\n  userName: \"\",                                                                                                        // 5\n  collectionName: \"\",                                                                                                  // 6\n  recordId: \"\",                                                                                                        // 7\n  patientId: \"\",                                                                                                       // 8\n  patientName: \"\",                                                                                                     // 9\n  message: \"\"                                                                                                          // 10\n};                                                                                                                     // 11\n*/                                                                                                                     // 12\n                                                                                                                       // 13\n                                                                                                                       // 14\nHipaaLogger = {                                                                                                        // 15\n                                                                                                                       // 16\n  /**                                                                                                                  // 17\n  * @summary Detects if a specific environment variable was exposed from the server.                                   // 18\n  * @locus Client                                                                                                      // 19\n  * @memberOf HipaaLogger                                                                                              // 20\n  * @name logEvent                                                                                                     // 21\n  * @param hipaaEvent.eventType                                                                                        // 22\n  * @param hipaaEvent.userId                                                                                           // 23\n  * @param hipaaEvent.userName                                                                                         // 24\n  * @param hipaaEvent.collectionName                                                                                   // 25\n  * @param hipaaEvent.recordId                                                                                         // 26\n  * @param hipaaEvent.patientId                                                                                        // 27\n  * @param hipaaEvent.patientName                                                                                      // 28\n  * @param hipaaEvent.message                                                                                          // 29\n  * @version 1.2.3                                                                                                     // 30\n  * @example                                                                                                           // 31\n  * ```js                                                                                                              // 32\n  * var hipaaEvent = {                                                                                                 // 33\n  *   eventType: \"modified\",                                                                                           // 34\n  *   userId: Meteor.userId(),                                                                                         // 35\n  *   userName: Meteor.user().profile.fullName,                                                                        // 36\n  *   collectionName: \"Medications\",                                                                                   // 37\n  *   recordId: Random.id(),                                                                                           // 38\n  *   patientId: Session.get('currentPatientId'),                                                                      // 39\n  *   patientName: Session.get('currentPatientName')                                                                   // 40\n  * };                                                                                                                 // 41\n  * HipaaLogger.logEvent(hipaaEvent);                                                                                  // 42\n  * ```                                                                                                                // 43\n  */                                                                                                                   // 44\n  logEvent: function(hipaaEvent, userId, userName, collectionName, recordId, patientId, patientName, message){         // 45\n    //console.log('logEvent', eventType, userId, userName, collectionName, recordId, patientId, patientName, message); // 46\n                                                                                                                       // 47\n    var newHipaaRecord = {};                                                                                           // 48\n    var hipaaRecordId = null;                                                                                          // 49\n                                                                                                                       // 50\n    if( typeof hipaaEvent === 'object'){                                                                               // 51\n      newHipaaRecord = hipaaEvent;                                                                                     // 52\n    }else{                                                                                                             // 53\n      newHipaaRecord.eventType = hipaaEvent;                                                                           // 54\n    }                                                                                                                  // 55\n                                                                                                                       // 56\n    //if(Meteor.isServer){                                                                                             // 57\n      newHipaaRecord.timestamp = new Date();                                                                           // 58\n    //}                                                                                                                // 59\n                                                                                                                       // 60\n    if(userId){                                                                                                        // 61\n      newHipaaRecord.userId = userId;                                                                                  // 62\n    }                                                                                                                  // 63\n    if(userName){                                                                                                      // 64\n      newHipaaRecord.userName = userName;                                                                              // 65\n    }                                                                                                                  // 66\n    if(recordId){                                                                                                      // 67\n      newHipaaRecord.recordId = recordId;                                                                              // 68\n    }                                                                                                                  // 69\n    if(collectionName){                                                                                                // 70\n      newHipaaRecord.collectionName = collectionName;                                                                  // 71\n    }                                                                                                                  // 72\n    if(message){                                                                                                       // 73\n      newHipaaRecord.message = message;                                                                                // 74\n    }                                                                                                                  // 75\n    if(patientId){                                                                                                     // 76\n      newHipaaRecord.patientId = patientId;                                                                            // 77\n    }                                                                                                                  // 78\n    if(patientName){                                                                                                   // 79\n      newHipaaRecord.patientName = patientName;                                                                        // 80\n    }                                                                                                                  // 81\n                                                                                                                       // 82\n    return Meteor.call(\"logEvent\", newHipaaRecord, function (error, result){                                           // 83\n      if (error){                                                                                                      // 84\n        console.log(\"error\", error);                                                                                   // 85\n      }                                                                                                                // 86\n      if (result){                                                                                                     // 87\n         return result                                                                                                 // 88\n      }                                                                                                                // 89\n    });                                                                                                                // 90\n  }                                                                                                                    // 91\n};                                                                                                                     // 92\n                                                                                                                       // 93\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}